<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Business Empire | Virtual Ventures</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html { 
            height: 100%; overflow: hidden; background: #020617; 
            color: white; font-family: 'Kanit', sans-serif; 
        }

        .biz-wrapper { 
            display: flex; flex-direction: column; height: 100vh; width: 100%; 
            background-image: linear-gradient(to bottom, rgba(2, 6, 23, 0.5), rgba(2, 6, 23, 0.9)), 
                              url('biz-bg.webp'); 
            background-size: cover; background-position: center;
            padding-top: 70px; padding-bottom: 90px;
        }

        /* TOP AD BANNER */
        .global-ad-banner {
            width: 92%; height: 45px; background: rgba(15, 23, 42, 0.9); 
            border: 1px solid rgba(251, 191, 36, 0.4); border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            color: #fbbf24; font-size: 0.65rem; font-weight: 800; 
            margin: 0 auto 15px auto; backdrop-filter: blur(10px);
            letter-spacing: 2px;
        }

        /* INCOME HEADER */
        .stats-card {
            width: 92%; margin: 0 auto 20px; padding: 15px;
            background: rgba(15, 23, 42, 0.8); border-radius: 20px;
            border: 1px solid rgba(251, 191, 36, 0.2); text-align: center;
            backdrop-filter: blur(10px);
        }
        .stats-label { font-size: 0.7rem; color: #94a3b8; font-weight: 700; letter-spacing: 2px; }
        .stats-value { font-size: 2rem; font-weight: 900; color: #fff; }

        /* LIST VIEW */
        .biz-list { flex: 1; overflow-y: auto; padding: 0 15px; scrollbar-width: none; }
        .biz-list::-webkit-scrollbar { display: none; }

        .biz-card {
            background: rgba(15, 23, 42, 0.7); border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 15px; margin-bottom: 12px; display: flex; align-items: center;
            gap: 15px; backdrop-filter: blur(15px);
        }

        .biz-icon { 
            width: 60px; height: 60px; background: rgba(251, 191, 36, 0.1); 
            border-radius: 15px; display: flex; align-items: center; 
            justify-content: center; font-size: 1.8rem; border: 1px solid rgba(251, 191, 36, 0.2);
        }

        .biz-info { flex: 1; }
        .biz-info h3 { font-size: 1.05rem; font-weight: 800; color: #fff; }
        .biz-info p { font-size: 0.75rem; color: #fbbf24; font-weight: 700; }
        .qty-badge { font-size: 0.65rem; color: #94a3b8; font-weight: 600; margin-top: 2px; }

        .buy-btn {
            background: #fbbf24; color: #020617; border: none;
            padding: 10px 18px; border-radius: 12px; font-weight: 900;
            font-size: 0.75rem; cursor: pointer; min-width: 90px;
        }
        .buy-btn:disabled { background: #1e293b; color: #475569; cursor: not-allowed; }
        .price-text { display: block; font-size: 0.6rem; color: #94a3b8; text-align: center; margin-top: 5px; }
    </style>
</head>
<body>

    <div class="biz-wrapper">
        <div class="global-ad-banner">PREMIUM SPONSOR AD</div>

        <div class="stats-card">
            <p class="stats-label">TOTAL PASSIVE INCOME</p>
            <div id="totalIncome" class="stats-value">0/hr</div>
        </div>

        <div class="biz-list" id="bizContainer">
            </div>
    </div>

    <script src="settings.js"></script>
    <script>
        // Expanded Business List (50 Items)
        const businesses = [
            { id: 1, name: "Chai Tapri", icon: "‚òï", cost: 500, income: 45 },
            { id: 2, name: "Pan Shop", icon: "üçÉ", cost: 1200, income: 110 },
            { id: 3, name: "News Stand", icon: "üì∞", cost: 2500, income: 240 },
            { id: 4, name: "Barber Shop", icon: "‚úÇÔ∏è", cost: 5000, income: 500 },
            { id: 5, name: "Kirana Store", icon: "üõí", cost: 12000, income: 1300 },
            { id: 6, name: "Juice Center", icon: "ü•§", cost: 25000, income: 2800 },
            { id: 7, name: "Gymnasium", icon: "üèãÔ∏è", cost: 60000, income: 7000 },
            { id: 8, name: "Cyber Cafe", icon: "üñ•Ô∏è", cost: 150000, income: 18000 },
            { id: 9, name: "Pizza Outlet", icon: "üçï", cost: 400000, income: 50000 },
            { id: 10, name: "Tech Startup", icon: "üöÄ", cost: 1000000, income: 130000 },
            // ... Logic can dynamically generate more or you can add manually
        ];

        // Dyanmic generation for 50 items to keep code clean
        const icons = ["üè≠", "üè®", "üè•", "üè¢", "üö¢", "‚úàÔ∏è", "üíé", "üîã", "üì°", "üõ∞Ô∏è"];
        const names = ["Steel Factory", "Grand Resort", "Private Clinic", "IT Park", "Shipping Line", "Airlines", "Diamond Mine", "Solar Farm", "Data Center", "Space Tourism"];
        
        for(let i=11; i<=50; i++){
            let prev = businesses[i-2];
            businesses.push({
                id: i,
                name: names[i%10] + " " + (Math.floor(i/10) + 1),
                icon: icons[i%10],
                cost: Math.floor(prev.cost * 2.2),
                income: Math.floor(prev.income * 2.1)
            });
        }

        function formatVal(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'k';
            return num.toLocaleString();
        }

        function renderBiz() {
    const container = document.getElementById('bizContainer');
    const myBiz = JSON.parse(localStorage.getItem('vv_biz')) || [];
    const coins = Number(localStorage.getItem('vv_balance')) || 0;
    let totalHrIncome = 0;

    let html = '';
    businesses.forEach(b => {
        const owned = myBiz.find(item => item.id === b.id);
        const count = owned ? owned.count : 0;
        totalHrIncome += (count * b.income);

        html += `
            <div class="biz-card">
                <div class="biz-icon">${b.icon}</div>
                <div class="biz-info">
                    <h3>${b.name}</h3>
                    <p>+${window.formatBalance(b.income)}/hr</p>
                    <div class="qty-badge">OWNED: ${count}</div>
                </div>
                <div class="buy-section">
                    <button class="buy-btn" onclick="buyBiz(${b.id})" ${coins < b.cost ? 'disabled' : ''}>BUY</button>
                    <span class="price-text">üü° ${window.formatBalance(b.cost)}</span>
                </div>
            </div>
        `;
    });

    container.innerHTML = html;
    document.getElementById('totalIncome').innerText = window.formatBalance(totalHrIncome) + "/hr";
}

        window.buyBiz = function(id) {
            let coins = Number(localStorage.getItem('vv_balance')) || 0;
            const bData = businesses.find(b => b.id === id);
            
            if (coins >= bData.cost) {
                localStorage.setItem('vv_balance', coins - bData.cost);
                let myBiz = JSON.parse(localStorage.getItem('vv_biz')) || [];
                const idx = myBiz.findIndex(i => i.id === id);
                
                if (idx > -1) myBiz[idx].count++;
                else myBiz.push({ id: id, count: 1, income: bData.income });
                
                localStorage.setItem('vv_biz', JSON.stringify(myBiz));
                if(window.playSound) window.playSound('tap');
                renderBiz();
            }
        };

        // Live update UI every second
        setInterval(renderBiz, 1000);
        renderBiz();
    </script>
</body>
</html>