<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Side Hustle | Virtual Ventures</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html { 
            height: 100%; overflow: hidden; background: #020617; 
            color: white; font-family: 'Kanit', sans-serif; 
        }

        .jobs-wrapper { 
            display: flex; flex-direction: column; height: 100vh; width: 100%; 
            background-image: linear-gradient(to bottom, rgba(2, 6, 23, 0.6), rgba(2, 6, 23, 0.9)), 
                              url('jobs-bg.webp'); 
            background-size: cover; background-position: center;
            padding-top: 70px; padding-bottom: 90px;
        }

        /* 1. AD BANNER (Wapas le aaya revenue ke liye) */
        .global-ad-banner {
            width: 92%; height: 45px; background: rgba(15, 23, 42, 0.9); 
            border: 1px solid rgba(251, 191, 36, 0.4); border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            color: #fbbf24; font-size: 0.65rem; font-weight: 800; 
            letter-spacing: 2px; margin: 0 auto 15px auto; backdrop-filter: blur(10px);
        }

        .content { flex: 1; overflow-y: auto; padding: 15px; scrollbar-width: none; }
        .content::-webkit-scrollbar { display: none; }

        .glass-box { 
            background: rgba(15, 23, 42, 0.8); border-radius: 20px; 
            border: 1px solid rgba(251, 191, 36, 0.2); backdrop-filter: blur(15px);
            margin-bottom: 15px; padding: 15px; display: flex; align-items: center; gap: 15px;
        }

        .game-icon { width: 55px; height: 55px; background: rgba(251, 191, 36, 0.1); border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; border: 1px solid rgba(251, 191, 36, 0.2); }
        .game-info { flex: 1; }
        .game-info h3 { font-size: 1.1rem; font-weight: 800; color: #fff; }
        .game-info p { font-size: 0.65rem; color: #94a3b8; font-weight: 600; }

        .energy-cost { font-size: 0.65rem; color: #fbbf24; font-weight: 900; margin-top: 4px; }

        .play-btn {
            border: none; padding: 10px 15px; border-radius: 12px; font-weight: 900;
            font-size: 0.7rem; letter-spacing: 0.5px; cursor: pointer; min-width: 100px;
            font-family: 'Kanit';
        }
        .btn-play { background: #fbbf24; color: #020617; }
        .btn-ad { background: #4ade80; color: #020617; }

        .page-head { margin-bottom: 10px; padding-left: 5px; display: flex; justify-content: space-between; align-items: center; }
        .page-head h1 { font-size: 1.5rem; font-weight: 900; }
        .energy-badge { background: rgba(251, 191, 36, 0.1); padding: 5px 12px; border-radius: 20px; border: 1px solid #fbbf24; color: #fbbf24; font-size: 0.8rem; font-weight: 900; }

        #videoOverlay { position: fixed; inset: 0; background: #000; z-index: 10000; display: none; flex-direction: column; align-items: center; justify-content: center; }
    </style>
</head>
<body>

    <div class="jobs-wrapper">
        <div class="global-ad-banner">PREMIUM SPONSOR AD</div>

        <div class="content">
            <div class="page-head">
                <h1>SIDE HUSTLE</h1>
                <div class="energy-badge" id="userEnergyDisplay">âš¡ 0</div>
            </div>

            <div id="gamesContainer"></div>
        </div>
    </div>

    <div id="videoOverlay">
        <div style="text-align: center;">
            <p style="color: #fbbf24; font-weight: 900; letter-spacing: 2px; margin-bottom: 10px;">LOADING REWARD AD</p>
            <h1 id="adTimer" style="font-size: 4rem; font-weight: 900;">5</h1>
        </div>
    </div>

    <script src="settings.js"></script>
    <script>
    // Games Configuration with updated filenames
    const games = [
        { id: 'dice', name: 'Lucky Dice', icon: 'ðŸŽ²', desc: 'High risk, higher rewards', url: 'dice-game.html' },
        { id: 'math', name: 'Math Master', icon: 'ðŸ§®', desc: 'Solve & Earn capital', url: 'math-game.html' },
        { id: 'memory', name: 'Memory Match', icon: 'ðŸ§ ', desc: 'Find pairs, gain focus', url: 'memory-game.html' },
        { id: 'color', name: 'Color Match', icon: 'ðŸŽ¨', desc: 'Reflex test for money', url: 'color-game.html' },
        { id: '2048', name: '2048 Wealth', icon: 'ðŸ†', desc: 'Merge tiles to grow', url: '2048-game.html' }
    ];

    function getEnergyCost() {
        const dietCost = Number(localStorage.getItem('vv_diet_cost')) || 10;
        const liveCost = Number(localStorage.getItem('vv_live_cost')) || 20;
        const dietLevels = { 10:1, 40:2, 150:3, 500:4, 2000:5 };
        const liveLevels = { 20:1, 150:2, 800:3, 3500:4, 15000:5 };
        let level = (dietLevels[dietCost] || 1) + (liveLevels[liveCost] || 1); 
        return (level * 50); 
    }

    function updateLiveUI() {
        const currentEnergy = Number(localStorage.getItem('vv_energy')) || 0;
        const cost = getEnergyCost();
        const display = document.getElementById('userEnergyDisplay');
        if(display) display.innerText = `âš¡ ${Math.floor(currentEnergy)}`;
        
        const btns = document.querySelectorAll('.play-btn');
        btns.forEach((btn, index) => {
            const canPlay = currentEnergy >= cost;
            if(canPlay) {
                btn.innerText = 'PLAY';
                btn.className = 'play-btn btn-play';
            } else {
                btn.innerText = 'WATCH AD';
                btn.className = 'play-btn btn-ad';
            }
        });
    }

    function renderGames() {
        const container = document.getElementById('gamesContainer');
        const cost = getEnergyCost();
        container.innerHTML = '';

        games.forEach(g => {
            container.innerHTML += `
                <div class="glass-box">
                    <div class="game-icon">${g.icon}</div>
                    <div class="game-info">
                        <h3>${g.name}</h3>
                        <p>${g.desc}</p>
                        <div class="energy-cost">âš¡ COST: ${cost}</div>
                    </div>
                    <button class="play-btn" onclick="handleAction('${g.url}')">CHECKING...</button>
                </div>
            `;
        });
        updateLiveUI();
    }

    function handleAction(url) {
        const currentEnergy = Number(localStorage.getItem('vv_energy')) || 0;
        const cost = getEnergyCost();

        if (currentEnergy >= cost) {
            // Deduct Energy and go to game
            localStorage.setItem('vv_energy', currentEnergy - cost);
            window.location.href = url;
        } else {
            // Show Ad and refill for 1 game
            showAd(() => {
                localStorage.setItem('vv_energy', cost);
                updateLiveUI();
            });
        }
    }

    function showAd(callback) {
        const overlay = document.getElementById('videoOverlay');
        const timerText = document.getElementById('adTimer');
        overlay.style.display = 'flex';
        let timeLeft = 5;
        timerText.innerText = timeLeft;
        const interval = setInterval(() => {
            timeLeft--;
            timerText.innerText = timeLeft;
            if(timeLeft <= 0) {
                clearInterval(interval);
                overlay.style.display = 'none';
                callback();
            }
        }, 1000);
    }

    setInterval(updateLiveUI, 500);
    window.onload = renderGames;
</script>
</body>
</html>